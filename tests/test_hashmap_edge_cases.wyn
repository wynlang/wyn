// TDD Test: HashMap edge cases

fn test_hashmap_empty_len() -> int {
    var map = HashMap::new()
    var size = map.len()
    if size == 0 {
        print("PASS: empty HashMap len\n")
        return 0
    }
    print("FAIL: empty HashMap should have len 0\n")
    return 1
}

fn test_hashmap_overwrite() -> int {
    var map = HashMap::new()
    map.set("key", "value1")
    map.set("key", "value2")
    
    var size = map.len()
    if size == 1 {
        print("PASS: HashMap overwrite\n")
        return 0
    }
    print("FAIL: HashMap overwrite should keep len 1\n")
    return 1
}

fn test_hashmap_remove_nonexistent() -> int {
    var map = HashMap::new()
    map.set("key1", "val1")
    map.remove("nonexistent")
    
    var size = map.len()
    if size == 1 {
        print("PASS: HashMap remove nonexistent\n")
        return 0
    }
    print("FAIL: HashMap remove nonexistent\n")
    return 1
}

fn test_hashmap_has_after_remove() -> int {
    var map = HashMap::new()
    map.set("key", "val")
    map.remove("key")
    
    var has = map.has("key")
    if has == 0 {
        print("PASS: HashMap has after remove\n")
        return 0
    }
    print("FAIL: HashMap should not have removed key\n")
    return 1
}

fn main() -> int {
    print("=== HashMap Edge Cases Tests ===\n")
    var failures = 0
    failures = failures + test_hashmap_empty_len()
    failures = failures + test_hashmap_overwrite()
    failures = failures + test_hashmap_remove_nonexistent()
    failures = failures + test_hashmap_has_after_remove()
    
    if failures == 0 {
        print("\nAll tests PASSED!\n")
    }
    return failures
}
