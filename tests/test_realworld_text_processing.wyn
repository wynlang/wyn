// Real-World Test: Text Processing
// Common text processing operations

fn count_words(text: string) -> int {
    var count = 0
    var in_word = 0
    var i = 0
    
    while i < text.len() {
        var ch = text.slice(i, i + 1)
        var space: string = " "
        
        if ch == space {
            in_word = 0
        } else {
            if in_word == 0 {
                count = count + 1
                in_word = 1
            }
        }
        i = i + 1
    }
    
    return count
}

fn reverse_string(text: string) -> string {
    var result: string = ""
    var i = text.len() - 1
    
    while i >= 0 {
        var ch = text.slice(i, i + 1)
        result = result + ch
        i = i - 1
    }
    
    return result
}

fn test_count_words_simple() -> int {
    var text: string = "hello world"
    var count = count_words(text)
    if count == 2 {
        print("PASS: count words simple\n")
        return 0
    }
    return 1
}

fn test_count_words_multiple_spaces() -> int {
    var text: string = "hello  world  test"
    var count = count_words(text)
    if count == 3 {
        print("PASS: count words multiple spaces\n")
        return 0
    }
    return 1
}

fn test_count_words_single() -> int {
    var text: string = "hello"
    var count = count_words(text)
    if count == 1 {
        print("PASS: count words single\n")
        return 0
    }
    return 1
}

fn test_reverse_string() -> int {
    var text: string = "hello"
    var reversed = reverse_string(text)
    var expected: string = "olleh"
    if reversed == expected {
        print("PASS: reverse string\n")
        return 0
    }
    return 1
}

fn test_reverse_single_char() -> int {
    var text: string = "a"
    var reversed = reverse_string(text)
    var expected: string = "a"
    if reversed == expected {
        print("PASS: reverse single char\n")
        return 0
    }
    return 1
}

fn main() -> int {
    print("=== Real-World: Text Processing ===\n")
    var failures = 0
    failures = failures + test_count_words_simple()
    failures = failures + test_count_words_multiple_spaces()
    failures = failures + test_count_words_single()
    failures = failures + test_reverse_string()
    failures = failures + test_reverse_single_char()
    
    if failures == 0 {
        print("\nAll tests PASSED!\n")
    }
    return failures
}
