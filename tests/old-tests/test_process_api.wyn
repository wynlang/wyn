// Test: Process execution API
// TDD tests for Process::exec and Process::exec_timeout

fn test_exec_simple() {
    print("Test: exec simple command... ")
    
    var result = Process::exec("echo", ["hello"])
    
    if result.exit_code == 0 {
        print("✓\n")
    } else {
        print("✗ Expected exit code 0, got " + result.exit_code.to_string() + "\n")
    }
}

fn test_exec_with_args() {
    print("Test: exec with multiple args... ")
    
    var result = Process::exec("echo", ["hello", "world"])
    
    if result.exit_code == 0 {
        print("✓\n")
    } else {
        print("✗\n")
    }
}

fn test_exec_failure() {
    print("Test: exec non-existent command... ")
    
    var result = Process::exec("nonexistent_command_xyz", [])
    
    if result.exit_code != 0 {
        print("✓\n")
    } else {
        print("✗ Expected non-zero exit code\n")
    }
}

fn test_exec_timeout() {
    print("Test: exec with timeout... ")
    
    // Command that completes quickly
    var result = Process::exec_timeout("echo", ["test"], 5000)
    
    if result.exit_code == 0 && !result.timeout {
        print("✓\n")
    } else {
        print("✗\n")
    }
}

fn test_exec_timeout_exceeded() {
    print("Test: exec timeout exceeded... ")
    
    // Command that takes too long (sleep 10s with 1s timeout)
    var result = Process::exec_timeout("sleep", ["10"], 1000)
    
    if result.timeout {
        print("✓\n")
    } else {
        print("✗ Expected timeout\n")
    }
}

fn main() -> int {
    print("╔══════════════════════════════════════════════════════════════════════════╗\n")
    print("║                    Process API Tests                                     ║\n")
    print("╚══════════════════════════════════════════════════════════════════════════╝\n")
    print("\n")
    
    test_exec_simple()
    test_exec_with_args()
    test_exec_failure()
    test_exec_timeout()
    test_exec_timeout_exceeded()
    
    print("\n✓ All Process tests passed\n")
    return 0
}
