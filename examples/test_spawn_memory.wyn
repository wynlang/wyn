// Benchmark: Memory sharing between spawns
// Tests shared data structures

var shared_counter = 0;

fn increment_worker() {
    var i = 0;
    while (i < 100) {
        shared_counter = shared_counter + 1;
        i = i + 1;
    }
}

fn main() {
    print("Testing memory sharing between spawns...\n");
    
    var i = 0;
    while (i < 10) {
        spawn increment_worker();
        i = i + 1;
    }
    
    print("Spawned 10 workers, each incrementing 100 times\n");
    print("Expected: 1000, Actual: ");
    print(shared_counter);
    print("\n");
    
    return 0;
}
