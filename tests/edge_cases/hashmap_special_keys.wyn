// Test HashMap with special keys: spaces, special chars, empty string
fn main() -> int {
    var map = wyn_hashmap_new();
    
    print("Testing HashMap with special keys\n");
    
    // Test empty string key
    wyn_hashmap_insert_int(map, "", 42);
    if (wyn_hashmap_has(map, "")) {
        var val = wyn_hashmap_get_int(map, "");
        print("Empty string key value: ");
        print(val);
        print("\n");
    }
    
    // Test keys with spaces
    wyn_hashmap_insert_int(map, "key with spaces", 100);
    wyn_hashmap_insert_int(map, " leading space", 200);
    wyn_hashmap_insert_int(map, "trailing space ", 300);
    wyn_hashmap_insert_int(map, "  multiple  spaces  ", 400);
    
    // Test special characters
    wyn_hashmap_insert_int(map, "key!@#$%^&*()", 500);
    wyn_hashmap_insert_int(map, "key.with.dots", 1200);
    wyn_hashmap_insert_int(map, "key,with,commas", 1300);
    wyn_hashmap_insert_int(map, "key;with;semicolons", 1400);
    wyn_hashmap_insert_int(map, "key:with:colons", 1500);
    wyn_hashmap_insert_int(map, "key-with-dashes", 2400);
    wyn_hashmap_insert_int(map, "key_with_underscores", 2500);
    
    // Test very long key
    wyn_hashmap_insert_int(map, "this_is_a_very_long_key_that_should_test_the_hash_function", 4000);
    
    // Test numeric-looking keys
    wyn_hashmap_insert_int(map, "123", 5000);
    wyn_hashmap_insert_int(map, "0", 5100);
    wyn_hashmap_insert_int(map, "456", 5200);
    
    var map_len = wyn_hashmap_len(map);
    print("Map length with special keys: ");
    print(map_len);
    print("\n");
    
    // Verify some special keys work
    var tests_passed = 0;
    var total_tests = 0;
    
    // Test empty string
    total_tests = total_tests + 1;
    if (wyn_hashmap_has(map, "") && wyn_hashmap_get_int(map, "") == 42) {
        tests_passed = tests_passed + 1;
    }
    
    // Test spaces
    total_tests = total_tests + 1;
    if (wyn_hashmap_has(map, "key with spaces") && wyn_hashmap_get_int(map, "key with spaces") == 100) {
        tests_passed = tests_passed + 1;
    }
    
    // Test special characters
    total_tests = total_tests + 1;
    if (wyn_hashmap_has(map, "key!@#$%^&*()") && wyn_hashmap_get_int(map, "key!@#$%^&*()") == 500) {
        tests_passed = tests_passed + 1;
    }
    
    total_tests = total_tests + 1;
    if (wyn_hashmap_has(map, "key-with-dashes") && wyn_hashmap_get_int(map, "key-with-dashes") == 2400) {
        tests_passed = tests_passed + 1;
    }
    
    total_tests = total_tests + 1;
    if (wyn_hashmap_has(map, "123") && wyn_hashmap_get_int(map, "123") == 5000) {
        tests_passed = tests_passed + 1;
    }
    
    print("Special key tests passed: ");
    print(tests_passed);
    print("/");
    print(total_tests);
    print("\n");
    
    // Test key collision scenarios
    wyn_hashmap_insert_int(map, "collision1", 9001);
    wyn_hashmap_insert_int(map, "collision2", 9002);
    wyn_hashmap_insert_int(map, "collision3", 9003);
    
    if (wyn_hashmap_get_int(map, "collision1") == 9001 && 
        wyn_hashmap_get_int(map, "collision2") == 9002 && 
        wyn_hashmap_get_int(map, "collision3") == 9003) {
        print("Collision handling test: PASSED\n");
    } else {
        print("Collision handling test: FAILED\n");
    }
    
    wyn_hashmap_free(map);
    print("Special keys HashMap test completed\n");
    return 0;
}