fn compute(n: int) -> int {
    return n * n;
}

fn add(a: int, b: int) -> int {
    return a + b;
}

fn main() -> int {
    // Test 1: Single future
    var f1 = spawn compute(10);
    var r1 = f1.await();
    if r1 != 100 {
        return 1;
    }
    print(1);
    
    // Test 2: Multiple futures
    var f2 = spawn compute(20);
    var f3 = spawn compute(30);
    var r2 = f2.await();
    var r3 = f3.await();
    if r2 != 400 {
        return 2;
    }
    if r3 != 900 {
        return 3;
    }
    print(2);
    
    // Test 3: Function with multiple args
    var f4 = spawn add(10, 20);
    var r4 = f4.await();
    if r4 != 30 {
        return 4;
    }
    print(3);
    
    // Test 4: Chain of spawns
    var f5 = spawn compute(5);
    var r5 = f5.await();
    var f6 = spawn compute(r5);
    var r6 = f6.await();
    if r6 != 625 {
        return 5;
    }
    print(4);
    
    return 0;
}
