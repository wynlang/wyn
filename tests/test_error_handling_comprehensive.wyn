// Test: Result type with stdlib integration
fn main() -> int {
    var passed = 0
    var failed = 0
    
    // Test 1: Parse with result checking (current approach)
    var num = str_parse_int("42")
    if !str_parse_int_failed(num) {
        if num == 42 {
            passed = passed + 1
        } else {
            failed = failed + 1
        }
    } else {
        failed = failed + 1
    }
    
    // Test 2: Parse error detection
    var invalid = str_parse_int("abc")
    if str_parse_int_failed(invalid) {
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    // Test 3: Multiple parses with error handling
    var values: [string] = ["10", "20", "invalid", "30"]
    var valid_count = 0
    var error_count = 0
    
    var v0 = str_parse_int(values[0])
    if !str_parse_int_failed(v0) {
        valid_count = valid_count + 1
    } else {
        error_count = error_count + 1
    }
    
    var v1 = str_parse_int(values[1])
    if !str_parse_int_failed(v1) {
        valid_count = valid_count + 1
    } else {
        error_count = error_count + 1
    }
    
    var v2 = str_parse_int(values[2])
    if !str_parse_int_failed(v2) {
        valid_count = valid_count + 1
    } else {
        error_count = error_count + 1
    }
    
    var v3 = str_parse_int(values[3])
    if !str_parse_int_failed(v3) {
        valid_count = valid_count + 1
    } else {
        error_count = error_count + 1
    }
    
    if valid_count == 3 {
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    if error_count == 1 {
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    if failed == 0 {
        print("All tests PASSED")
        return 0
    }
    print("Some tests FAILED")
    return 1
}
