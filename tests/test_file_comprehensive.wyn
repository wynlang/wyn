// TDD Test: File operations comprehensive

fn test_file_write_read() -> int {
    var filename = "/tmp/wyn_test_file.txt"
    var content = "Hello from Wyn!"
    
    File::write(filename, content)
    var read_content = File::read(filename)
    
    if read_content == content {
        print("PASS: File write/read\n")
        File::delete(filename)
        return 0
    }
    print("FAIL: File write/read\n")
    File::delete(filename)
    return 1
}

fn test_file_exists() -> int {
    var filename = "/tmp/wyn_test_exists.txt"
    
    File::write(filename, "test")
    var exists_after = File::exists(filename)
    
    if exists_after == 1 {
        File::delete(filename)
        var exists_deleted = File::exists(filename)
        if exists_deleted == 0 {
            print("PASS: File.exists()\n")
            return 0
        }
    }
    print("FAIL: File.exists()\n")
    return 1
}

fn test_file_delete() -> int {
    var filename = "/tmp/wyn_test_delete.txt"
    
    File::write(filename, "delete me")
    File::delete(filename)
    
    var exists = File::exists(filename)
    if exists == 0 {
        print("PASS: File.delete()\n")
        return 0
    }
    print("FAIL: File.delete()\n")
    return 1
}

fn test_file_overwrite() -> int {
    var filename = "/tmp/wyn_test_overwrite.txt"
    
    File::write(filename, "first")
    File::write(filename, "second")
    
    var content = File::read(filename)
    var expected = "second"
    
    if content == expected {
        print("PASS: File overwrite\n")
        File::delete(filename)
        return 0
    }
    print("FAIL: File overwrite\n")
    File::delete(filename)
    return 1
}

fn main() -> int {
    print("=== File Operations Tests ===\n")
    var failures = 0
    failures = failures + test_file_write_read()
    failures = failures + test_file_exists()
    failures = failures + test_file_delete()
    failures = failures + test_file_overwrite()
    
    if failures == 0 {
        print("\nAll tests PASSED!\n")
    }
    return failures
}
