// TDD: Returning closures from functions
// Tests higher-order functions that return closures

fn make_adder(x: int) -> fn(int) -> int {
    return fn(y: int) -> int {
        return x + y
    }
}

fn make_multiplier(factor: int) -> fn(int) -> int {
    return fn(n: int) -> int {
        return n * factor
    }
}

fn main() -> int {
    var add5 = make_adder(5)
    var result1 = add5(10)
    println(int_to_string(result1))  // Should print 15

    var times3 = make_multiplier(3)
    var result2 = times3(7)
    println(int_to_string(result2))  // Should print 21

    // Nested closure
    var add10 = make_adder(10)
    var result3 = add10(add5(5))
    println(int_to_string(result3))  // Should print 20

    return 0
}
