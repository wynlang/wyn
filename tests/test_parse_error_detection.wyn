// Test parse error detection with INT_MIN sentinel
fn main() -> int {
    var passed = 0
    var failed = 0
    
    // Test 1: Valid parse should NOT return INT_MIN
    var valid = str_parse_int("42")
    if valid != -2147483648 {  // INT_MIN
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    // Test 2: Parse "0" should return 0, NOT INT_MIN
    var zero = str_parse_int("0")
    if zero == 0 {
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    // Test 3: Invalid parse SHOULD return INT_MIN
    var invalid = str_parse_int("invalid")
    if invalid == -2147483648 {  // INT_MIN = error
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    // Test 4: Empty string SHOULD return INT_MIN
    var empty = str_parse_int("")
    if empty == -2147483648 {
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    // Test 5: Can now distinguish error from valid 0!
    var test_zero = str_parse_int("0")
    var test_err = str_parse_int("abc")
    if test_zero != test_err {
        passed = passed + 1
    } else {
        failed = failed + 1
    }
    
    if failed == 0 {
        return 0
    }
    return 1
}
