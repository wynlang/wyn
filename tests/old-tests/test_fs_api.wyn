// Test: Filesystem API
// TDD tests for Fs::read_dir, Fs::exists, etc.

fn test_read_dir() {
    print("Test: read_dir current directory... ")
    
    var files = Fs::read_dir(".")
    
    if files.len() > 0 {
        print("✓ (found " + files.len().to_string() + " entries)\n")
    } else {
        print("✗ Expected files in current directory\n")
    }
}

fn test_read_dir_filter() {
    print("Test: read_dir and filter .wyn files... ")
    
    var files = Fs::read_dir(".")
    var wyn_files = 0
    
    var i = 0
    while i < files.len() {
        if files[i].ends_with(".wyn") {
            wyn_files = wyn_files + 1
        }
        i = i + 1
    }
    
    if wyn_files > 0 {
        print("✓ (found " + wyn_files.to_string() + " .wyn files)\n")
    } else {
        print("✗ Expected .wyn files\n")
    }
}

fn test_exists_file() {
    print("Test: exists for this test file... ")
    
    if Fs::exists("test_fs_api.wyn") {
        print("✓\n")
    } else {
        print("✗ This file should exist\n")
    }
}

fn test_exists_nonexistent() {
    print("Test: exists for non-existent file... ")
    
    if !Fs::exists("nonexistent_file_xyz_123.txt") {
        print("✓\n")
    } else {
        print("✗ File should not exist\n")
    }
}

fn test_is_file() {
    print("Test: is_file for this test... ")
    
    if Fs::is_file("test_fs_api.wyn") {
        print("✓\n")
    } else {
        print("✗ This should be a file\n")
    }
}

fn test_is_dir() {
    print("Test: is_dir for current directory... ")
    
    if Fs::is_dir(".") {
        print("✓\n")
    } else {
        print("✗ Current directory should be a directory\n")
    }
}

fn main() -> int {
    print("╔══════════════════════════════════════════════════════════════════════════╗\n")
    print("║                    Filesystem API Tests                                  ║\n")
    print("╚══════════════════════════════════════════════════════════════════════════╝\n")
    print("\n")
    
    test_read_dir()
    test_read_dir_filter()
    test_exists_file()
    test_exists_nonexistent()
    test_is_file()
    test_is_dir()
    
    print("\n✓ All Filesystem tests passed\n")
    return 0
}
