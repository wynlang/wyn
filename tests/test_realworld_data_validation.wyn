// Real-World Test: Data Validation
// Validate user input data

fn is_valid_age(age: int) -> int {
    if age >= 0 {
        if age <= 150 {
            return 1
        }
    }
    return 0
}

fn is_valid_email(email: string) -> int {
    // Simple check: contains @ and has length > 3
    var has_at = email.contains("@")
    if has_at == 1 {
        if email.len() > 3 {
            return 1
        }
    }
    return 0
}

fn is_valid_username(username: string) -> int {
    // Username must be 3-20 characters
    var len = username.len()
    if len >= 3 {
        if len <= 20 {
            return 1
        }
    }
    return 0
}

fn test_valid_age() -> int {
    if is_valid_age(25) == 1 {
        print("PASS: valid age\n")
        return 0
    }
    return 1
}

fn test_invalid_age_negative() -> int {
    if is_valid_age(-5) == 0 {
        print("PASS: invalid age negative\n")
        return 0
    }
    return 1
}

fn test_invalid_age_too_high() -> int {
    if is_valid_age(200) == 0 {
        print("PASS: invalid age too high\n")
        return 0
    }
    return 1
}

fn test_valid_email() -> int {
    var email: string = "user@example.com"
    if is_valid_email(email) == 1 {
        print("PASS: valid email\n")
        return 0
    }
    return 1
}

fn test_invalid_email_no_at() -> int {
    var email: string = "userexample.com"
    if is_valid_email(email) == 0 {
        print("PASS: invalid email no @\n")
        return 0
    }
    return 1
}

fn test_valid_username() -> int {
    var username: string = "alice"
    if is_valid_username(username) == 1 {
        print("PASS: valid username\n")
        return 0
    }
    return 1
}

fn test_invalid_username_too_short() -> int {
    var username: string = "ab"
    if is_valid_username(username) == 0 {
        print("PASS: invalid username too short\n")
        return 0
    }
    return 1
}

fn main() -> int {
    print("=== Real-World: Data Validation ===\n")
    var failures = 0
    failures = failures + test_valid_age()
    failures = failures + test_invalid_age_negative()
    failures = failures + test_invalid_age_too_high()
    failures = failures + test_valid_email()
    failures = failures + test_invalid_email_no_at()
    failures = failures + test_valid_username()
    failures = failures + test_invalid_username_too_short()
    
    if failures == 0 {
        print("\nAll tests PASSED!\n")
    }
    return failures
}
