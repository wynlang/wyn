// Test: String manipulation methods

fn test_string_upper() -> int {
    var s = "hello"
    var result = s.upper()
    if str_eq(result, "HELLO") == 1 {
        print("PASS: upper\n")
        return 0
    }
    print("FAIL: upper\n")
    return 1
}

fn test_string_lower() -> int {
    var s = "HELLO"
    var result = s.lower()
    if str_eq(result, "hello") == 1 {
        print("PASS: lower\n")
        return 0
    }
    print("FAIL: lower\n")
    return 1
}

fn test_string_trim() -> int {
    var s = "  hello  "
    var result = s.trim()
    if str_eq(result, "hello") == 1 {
        print("PASS: trim\n")
        return 0
    }
    print("FAIL: trim\n")
    return 1
}

fn test_string_len() -> int {
    var s = "hello"
    var len = s.len()
    if len == 5 {
        print("PASS: len\n")
        return 0
    }
    print("FAIL: len\n")
    return 1
}

fn test_string_char_at() -> int {
    var s = "hello"
    var c = s.char_at(1)
    if str_eq(c, "e") == 1 {
        print("PASS: char_at\n")
        return 0
    }
    print("FAIL: char_at\n")
    return 1
}

fn test_string_split() -> int {
    var s = "a,b,c"
    var parts = s.split(",")
    if parts.len() == 3 {
        if str_eq(parts[0], "a") == 1 {
            if str_eq(parts[1], "b") == 1 {
                if str_eq(parts[2], "c") == 1 {
                    print("PASS: split\n")
                    return 0
                }
            }
        }
    }
    print("FAIL: split\n")
    return 1
}

fn main() -> int {
    print("=== String Manipulation Tests ===\n")
    var failures = 0
    
    failures = failures + test_string_upper()
    failures = failures + test_string_lower()
    failures = failures + test_string_trim()
    failures = failures + test_string_len()
    failures = failures + test_string_char_at()
    failures = failures + test_string_split()
    
    print("\n=== Summary ===\n")
    if failures == 0 {
        print("All tests PASSED!\n")
        return 0
    }
    
    print("FAILED: ")
    print(failures)
    print(" tests\n")
    return 1
}
