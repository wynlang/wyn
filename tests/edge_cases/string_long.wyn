fn main() -> int {
    print("=== Long String Edge Cases ===")
    
    // Create a long string (10KB+)
    var base = "0123456789ABCDEF"  // 16 chars
    var long_str = wyn_string_repeat(base, 640)  // 16 * 640 = 10,240 chars
    
    print("Created long string")
    print("Length:")
    print(wyn_string_len(long_str))
    
    // Test operations on long strings
    print("Testing contains on long string...")
    var contains1 = wyn_string_contains(long_str, "ABCD")
    var contains2 = wyn_string_contains(long_str, "XYZT")
    print("Contains 'ABCD':")
    print(contains1)
    print("Contains 'XYZT':")
    print(contains2)
    
    // Test starts_with and ends_with
    print("Testing starts/ends with...")
    var starts = wyn_string_starts_with(long_str, "0123")
    var ends = wyn_string_ends_with(long_str, "CDEF")
    print("Starts with '0123':")
    print(starts)
    print("Ends with 'CDEF':")
    print(ends)
    
    // Test substring on long string
    print("Testing substring...")
    var sub1 = wyn_str_substring(long_str, 0, 20)
    var sub2 = wyn_str_substring(long_str, 5000, 5020)
    print("First 20 chars:")
    print(sub1)
    print("Chars 5000-5020:")
    print(sub2)
    
    // Test index operations
    print("Testing index operations...")
    var idx1 = wyn_string_index_of(long_str, "ABCD")
    var idx2 = wyn_string_last_index_of(long_str, "ABCD")
    print("First index of 'ABCD':")
    print(idx1)
    print("Last index of 'ABCD':")
    print(idx2)
    
    // Test replace on long string (limited to avoid memory issues)
    print("Testing replace...")
    var replaced = wyn_str_replace(long_str, "0123", "XXXX")
    var new_len = wyn_string_len(replaced)
    print("Length after replace:")
    print(new_len)
    
    // Test split on long string (create a CSV-like string)
    var csv_base = "field1,field2,field3,field4"
    var csv_long = wyn_string_repeat(csv_base, 100)  // 2800 chars
    print("Created CSV-like long string")
    print("CSV Length:")
    print(wyn_string_len(csv_long))
    
    var count = split_count(csv_long, ",")
    print("Split CSV count:")
    print(count)
    
    // Test trim on long string with whitespace
    var padded_long = wyn_string_pad_left(long_str, 10300, " ")
    var padded_right = wyn_string_pad_right(padded_long, 10400, " ")
    print("Padded string length:")
    print(wyn_string_len(padded_right))
    
    var trimmed = wyn_string_trim(padded_right)
    print("Trimmed length:")
    print(wyn_string_len(trimmed))
    
    // Test memory stress - create multiple long strings
    var stress1 = wyn_string_repeat("A", 5000)
    var stress2 = wyn_string_repeat("B", 5000)
    var stress3 = wyn_string_repeat("C", 5000)
    
    print("Stress test - created 3 x 5KB strings")
    print("Stress1 length:")
    print(wyn_string_len(stress1))
    print("Stress2 length:")
    print(wyn_string_len(stress2))
    print("Stress3 length:")
    print(wyn_string_len(stress3))
    
    print("=== Long String Tests Complete ===")
    return 0
}