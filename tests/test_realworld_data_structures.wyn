// Real-World Test: Data Structures - Building a simple cache

fn test_cache_basic() -> int {
    var cache = HashMap::new()
    cache.set("user1", "Alice")
    cache.set("user2", "Bob")
    
    if cache.len() == 2 {
        print("PASS: cache basic\n")
        return 0
    }
    return 1
}

fn test_cache_lookup() -> int {
    var cache = HashMap::new()
    cache.set("key1", "value1")
    
    var has_key = cache.has("key1")
    if has_key == 1 {
        print("PASS: cache lookup\n")
        return 0
    }
    return 1
}

fn test_cache_update() -> int {
    var cache = HashMap::new()
    cache.set("key", "old")
    cache.set("key", "new")
    
    if cache.len() == 1 {
        print("PASS: cache update\n")
        return 0
    }
    return 1
}

fn test_cache_remove() -> int {
    var cache = HashMap::new()
    cache.set("key1", "val1")
    cache.set("key2", "val2")
    cache.remove("key1")
    
    if cache.len() == 1 {
        print("PASS: cache remove\n")
        return 0
    }
    return 1
}

fn test_unique_items() -> int {
    var seen = HashSet::new()
    seen.add("item1")
    seen.add("item2")
    seen.add("item1")
    
    if seen.len() == 2 {
        print("PASS: unique items\n")
        return 0
    }
    return 1
}

fn test_membership_check() -> int {
    var tags = HashSet::new()
    tags.add("important")
    tags.add("urgent")
    
    var has_important = tags.contains("important")
    var has_normal = tags.contains("normal")
    
    if has_important == 1 {
        if has_normal == 0 {
            print("PASS: membership check\n")
            return 0
        }
    }
    return 1
}

fn main() -> int {
    print("=== Real-World: Data Structures ===\n")
    var failures = 0
    failures = failures + test_cache_basic()
    failures = failures + test_cache_lookup()
    failures = failures + test_cache_update()
    failures = failures + test_cache_remove()
    failures = failures + test_unique_items()
    failures = failures + test_membership_check()
    
    if failures == 0 {
        print("\nAll tests PASSED!\n")
    }
    return failures
}
