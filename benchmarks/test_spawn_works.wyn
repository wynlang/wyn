// Verify spawn actually works
fn work() -> int {
    var sum = 0;
    var i = 0;
    while i < 1000000 {
        sum = sum + i;
        i = i + 1;
    }
    return sum;
}

fn main() -> int {
    var start = time_now();
    
    spawn work();
    spawn work();
    spawn work();
    spawn work();
    
    // Wait
    var wait_sum = 0;
    var j = 0;
    while j < 10000000 {
        wait_sum = wait_sum + 1;
        j = j + 1;
    }
    
    var elapsed = time_now() - start;
    print(elapsed / 1000000);  // ms
    return 0;
}
