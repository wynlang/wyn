// Test: Array utility methods

fn test_array_len() -> int {
    var arr = [1, 2, 3, 4, 5]
    var len = arr.len()
    if len == 5 {
        print("PASS: array len\n")
        return 0
    }
    print("FAIL: array len\n")
    return 1
}

fn test_array_push() -> int {
    var arr = [1, 2, 3]
    arr.push(4)
    var len = arr.len()
    if len == 4 {
        print("PASS: array push\n")
        return 0
    }
    print("FAIL: array push\n")
    return 1
}

fn test_array_pop() -> int {
    var arr = [1, 2, 3]
    var val = arr.pop()
    if val == 3 {
        var len = arr.len()
        if len == 2 {
            print("PASS: array pop\n")
            return 0
        }
    }
    print("FAIL: array pop\n")
    return 1
}

fn test_array_map() -> int {
    var arr = [1, 2, 3]
    var doubled = arr.map(|x| x * 2)
    if doubled[0] == 2 {
        if doubled[1] == 4 {
            if doubled[2] == 6 {
                print("PASS: array map\n")
                return 0
            }
        }
    }
    print("FAIL: array map\n")
    return 1
}

fn test_array_filter() -> int {
    var arr = [1, 2, 3, 4, 5]
    var evens = arr.filter(|x| x % 2 == 0)
    if evens.len() == 2 {
        if evens[0] == 2 {
            if evens[1] == 4 {
                print("PASS: array filter\n")
                return 0
            }
        }
    }
    print("FAIL: array filter\n")
    return 1
}

fn main() -> int {
    print("=== Array Methods Tests ===\n")
    var failures = 0
    
    failures = failures + test_array_len()
    failures = failures + test_array_push()
    failures = failures + test_array_pop()
    failures = failures + test_array_map()
    failures = failures + test_array_filter()
    
    print("\n=== Summary ===\n")
    if failures == 0 {
        print("All tests PASSED!\n")
        return 0
    }
    
    print("FAILED: ")
    print(failures)
    print(" tests\n")
    return 1
}
